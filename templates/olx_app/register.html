{% extends 'base.html' %}
{% load static %}
{% block maincontent %}
<!--inner banner-->
{% if messages %}
<div class="alert alert-success text-center" id="alert-msg">
  {% for message in messages %}
  <h3>{{ message }}</h3>
  {% endfor %}
</div>
{% endif %}

<div class="inner-banner">
  <div class="container">
    <div class="row">
      <div class="col-md-7">
        <h1>Sign Up</h1>
      </div>
      <div class="col-md-5">
        <ol class="breadcrumb">
          <li><a href="{% url 'index' %}">Home</a></li>
          <li class="active">Appointment</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<!--inner banner End-->

<!--Main Content Start-->
<div class="main-content padding-0">
  <section class="registration-form">
    <div class="container">
      <div class="row">
        <div class="col-md-6"><img src="{% static 'olx_market/images/reg.jpg' %}" alt=""></div>
        <div class="col-md-6">
          <form action="{% url 'registration' %}" method="post" id="registrationForm">
            {% csrf_token %}
            <div class="reg-form">
              <div class="form-group">
                <input class="form-control" placeholder="Full Name *" type="text" name="name" id="name">
                <span id="nameError" class="error"></span>
              </div>
              <div class="form-group">
                <input class="form-control" placeholder="Your Phone *" type="text" name="phone" id="phone">
                <span id="phoneError" class="error"></span>
              </div>
              <div class="form-group">
                <input class="form-control" placeholder="Your Email *" type="email" name="email" id="email">
                <span id="emailError" class="error"></span>
              </div>
              <div class="form-group">
                <input class="form-control" placeholder="Address *" type="text" name="address" id="address">
              </div>
              <!-- Other address fields (Country, State, District) can be added similarly -->
              <div class="form-group">
                <input class="form-control" placeholder="Password *" type="password" name="password" id="password">
                <span id="passwordError" class="error"></span>
              </div>
              <div class="form-group">
                <input class="form-control" placeholder="Confirm Password *" type="password" name="confirm_password" id="confirmPassword">
                <span id="confirmPasswordError" class="error"></span>
              </div>
              <div class="col-md-12 text-center">
                <button type="submit" id="submitRegistration">Register</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</div>
<br><br>

<!-- JavaScript for Form Validation and Password Generation -->
<script>
  document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Form validation logic
    let isValid = true;

    // Validation for name
    const nameField = document.getElementById('name');
    const nameError = document.getElementById('nameError');
    if (nameField.value.trim() === '') {
      nameError.textContent = 'Name is required';
      isValid = false;
    } else {
      nameError.textContent = '';
    }

    // Validation for email
    const emailField = document.getElementById('email');
    const emailError = document.getElementById('emailError');
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(emailField.value)) {
      emailError.textContent = 'Enter a valid email address';
      isValid = false;
    } else {
      emailError.textContent = '';
    }

    // Validation for phone number
    const phoneField = document.getElementById('phone');
    const phoneError = document.getElementById('phoneError');
    const phonePattern = /^\d{10}$/; // Modify as needed for your phone number format
    if (!phonePattern.test(phoneField.value)) {
      phoneError.textContent = 'Enter a valid phone number';
      isValid = false;
    } else {
      phoneError.textContent = '';
    }

    // Password generation and validation logic
    const passwordField = document.getElementById('password');
    const passwordError = document.getElementById('passwordError');

    // Generate a 6-digit random password
    const randomPassword = Math.floor(100000 + Math.random() * 900000);

    // Display the generated password in the password field
    passwordField.value = randomPassword;

    // You can implement additional password strength checks here if needed

    // If all validations pass, proceed with form submission
    if (isValid) {
      // Submit the form
      event.target.submit();
    } else {
      // Scroll to the first error message for better visibility
      document.querySelector('.error:empty').scrollIntoView({ behavior: 'smooth' });
    }
  });
</script>


{% endblock maincontent %}
